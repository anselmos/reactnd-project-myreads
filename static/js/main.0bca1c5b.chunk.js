(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){},24:function(e,t,a){e.exports=a(37)},35:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),l=a(21),c=a.n(l),r=a(3),s=a(4),i=a(6),h=a(5),d=a(7),u=a(0),b=a(18),p="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var m={Accept:"application/json",Authorization:k},f=function(){return fetch("".concat(p,"/books"),{headers:m}).then(function(e){return e.json()}).then(function(e){return e.books})},v=(a(11),function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(i.a)(this,Object(h.a)(t).call(this))).state={selected:"currentlyReading",data:[{title:"Currently Reading",value:"currentlyReading"},{title:"Want to Read",value:"wantToRead"},{title:"Read",value:"read"},{title:"None",value:"none"}]},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.props.callback(e)}},{key:"render",value:function(){var e=this,t=this.state.data.map(function(e,t){return o.a.createElement("option",{key:t,value:e.value},e.title," ")});return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:function(t){return e.handleChange(t.target.value)}},o.a.createElement("option",{value:"move",disabled:!0,selected:!0},"Move to..."),t))}}]),t}(o.a.Component)),C=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleCallback",value:function(e){var t,a;(t=this.props.data,a=e,fetch("".concat(p,"/books/").concat(t.id),{method:"PUT",headers:Object(b.a)({},m,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:a})}).then(function(e){return e.json()})).then(this.props.handleBookUpdateCallback(this.props.stateBookId,this.props.data.id))}},{key:"render",value:function(){return o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(this.props.data.imageLinks.thumbnail,")")}}),o.a.createElement(v,{bookId:this.props.data.id,callback:this.handleCallback.bind(this)})),o.a.createElement("div",{className:"book-title"},this.props.data.title),o.a.createElement("div",{className:"book-authors"},this.props.data.authors))}}]),t}(o.a.Component),O=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.handleBookUpdateCallback,t=this.props.books.map(function(t,a){return o.a.createElement("li",{key:a},o.a.createElement(C,{stateBookId:a,data:t,handleBookUpdateCallback:e.bind(this)}))});return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},this.props.name),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},t)))}}]),t}(o.a.Component),j=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.books.filter(function(e){return"currentlyReading"===e.shelf}),t=this.props.books.filter(function(e){return"wantToRead"===e.shelf}),a=this.props.books.filter(function(e){return"read"===e.shelf}),n=this.props.books.filter(function(e){return"undefined"===typeof e.shelf});return o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement(O,{handleBookUpdateCallback:this.props.handleBookUpdateCallback.bind(this),name:"Currently Reading",books:e}),o.a.createElement(O,{handleBookUpdateCallback:this.props.handleBookUpdateCallback.bind(this),name:"Want to Read",books:t}),o.a.createElement(O,{handleBookUpdateCallback:this.props.handleBookUpdateCallback.bind(this),name:"Read",books:a}),o.a.createElement(O,{handleBookUpdateCallback:this.props.handleBookUpdateCallback.bind(this),name:"NotInSelf",books:n})))}}]),t}(o.a.Component),y=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement(j,{books:this.props.books,handleBookUpdateCallback:this.props.handleBookUpdateCallback.bind(this)}),o.a.createElement("div",{className:"open-search"},o.a.createElement("button",{onClick:this.props.handleAddBookCallback},"Add a book")))}}]),t}(o.a.Component),E=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onSearchChange",value:function(e){this.props.onSearchResultsCallback(e)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement("button",{className:"close-search",onClick:this.props.handleCloseBookCallback},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{onChange:function(t){return e.onSearchChange(t.target.value)},type:"text",placeholder:"Search by title or author"}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"})))}}]),t}(o.a.Component);function g(){var e=this;f().then(function(t){e.setState({data:t})})}var B=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(i.a)(this,Object(h.a)(t).call(this))).state={data:[],showSearchPage:!1},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleAddBookCallback",value:function(e){e.push("/search")}},{key:"handleCloseBookCallback",value:function(e){e.push("/"),g.call(this)}},{key:"handleOnResultsCallback",value:function(e){var t=this;(function(e){return fetch("".concat(p,"/search"),{method:"POST",headers:Object(b.a)({},m,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})})(e).then(function(e){t.setState({data:e})})}},{key:"handleAppStateCallbackOnBookUpdate",value:function(e,t){g.call(this)}},{key:"componentDidMount",value:function(){g.call(this)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},o.a.createElement(u.a,{path:"/",render:function(t){var a=t.history;return o.a.createElement(y,{handleAddBookCallback:e.handleAddBookCallback.bind(e,a),books:e.state.data,handleBookUpdateCallback:e.handleAppStateCallbackOnBookUpdate.bind(e)})}}),o.a.createElement(u.a,{path:"/search",render:function(t){var a=t.history;return o.a.createElement(E,{handleCloseBookCallback:e.handleCloseBookCallback.bind(e,a),onSearchResultsCallback:e.handleOnResultsCallback.bind(e),books:e.state.data})}}))}}]),t}(o.a.Component),N=(a(35),a(15)),S=a(23);c.a.render(o.a.createElement(N.a,null,o.a.createElement(B,null)),document.getElementById("root")),Object(S.a)()}},[[24,2,1]]]);
//# sourceMappingURL=main.0bca1c5b.chunk.js.map