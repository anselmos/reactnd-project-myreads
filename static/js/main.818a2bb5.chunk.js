(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,a,t){},26:function(e,a,t){e.exports=t(39)},37:function(e,a,t){},39:function(e,a,t){"use strict";t.r(a);var n=t(1),o=t.n(n),l=t(23),c=t.n(l),s=t(16),r=t(3),i=t(4),h=t(6),d=t(5),b=t(7),u=t(11),k=t(0),p="https://reactnd-books-api.udacity.com",m=localStorage.token;m||(m=localStorage.token=Math.random().toString(36).substr(-8));var f={Accept:"application/json",Authorization:m},v=function(){return fetch("".concat(p,"/books"),{headers:f}).then(function(e){return e.json()}).then(function(e){return e.books})},O=(t(12),t(14)),C=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={value:null,data:[{title:"Currently Reading",value:"currentlyReading"},{title:"Want to Read",value:"wantToRead"},{title:"Read",value:"read"},{title:"None",value:"none"}]},t.handleChange=t.handleChange.bind(Object(u.a)(Object(u.a)(t))),t}return Object(b.a)(a,e),Object(i.a)(a,[{key:"handleChange",value:function(e){this.setState({value:e.target.value}),this.props.callback(e.target.value)}},{key:"render",value:function(){var e=this.state.data.map(function(e,a){return o.a.createElement("option",{key:a,value:e.value},e.title," ")});return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{defaultValue:"move",onChange:this.handleChange},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),e))}}]),a}(o.a.Component),j=function(e){function a(){return Object(r.a)(this,a),Object(h.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(b.a)(a,e),Object(i.a)(a,[{key:"handleCallback",value:function(e){var a,t;(a=this.props.data,t=e,fetch("".concat(p,"/books/").concat(a.id),{method:"PUT",headers:Object(s.a)({},f,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})).then(this.props.handleBookUpdateCallback(this.props.stateBookId,this.props.data.id))}},{key:"render",value:function(){return o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(this.props.data.imageLinks.thumbnail,")")}}),o.a.createElement(C,{bookId:this.props.data.id,callback:this.handleCallback.bind(this)})),o.a.createElement("div",{className:"book-title"},this.props.data.title),o.a.createElement("div",{className:"book-authors"},this.props.data.authors))}}]),a}(o.a.Component),y=function(e){function a(){return Object(r.a)(this,a),Object(h.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(b.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.props.handleBookUpdateCallback,a=Object.entries(this.props.books).map(function(a,t){var n=Object(O.a)(a,2),l=(n[0],n[1]);return o.a.createElement("li",{key:t},o.a.createElement(j,{stateBookId:t,data:l,handleBookUpdateCallback:e.bind(this)}))});return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},this.props.name),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},a)))}}]),a}(o.a.Component),E=function(e){function a(){return Object(r.a)(this,a),Object(h.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(b.a)(a,e),Object(i.a)(a,[{key:"filter_books_dict_by_shelf",value:function(e,a){return Object.fromEntries(Object.entries(e).filter(function(e){var t=Object(O.a)(e,2);t[0];return t[1].shelf===a}))}},{key:"render",value:function(){var e=this.filter_books_dict_by_shelf(this.props.books,"currentlyReading"),a=this.filter_books_dict_by_shelf(this.props.books,"wantToRead"),t=this.filter_books_dict_by_shelf(this.props.books,"read");this.filter_books_dict_by_shelf(this.props.books,"undefined");return o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement(y,{handleBookUpdateCallback:this.props.handleBookUpdateCallback.bind(this),name:"Currently Reading",books:e}),o.a.createElement(y,{handleBookUpdateCallback:this.props.handleBookUpdateCallback.bind(this),name:"Want to Read",books:a}),o.a.createElement(y,{handleBookUpdateCallback:this.props.handleBookUpdateCallback.bind(this),name:"Read",books:t})))}}]),a}(o.a.Component),B=function(e){function a(){return Object(r.a)(this,a),Object(h.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(b.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement(E,{books:this.props.books,handleBookUpdateCallback:this.props.handleBookUpdateCallback.bind(this)}),o.a.createElement("div",{className:"open-search"},o.a.createElement("button",{onClick:this.props.handleAddBookCallback},"Add a book")))}}]),a}(o.a.Component),g=function(e){function a(){return Object(r.a)(this,a),Object(h.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(b.a)(a,e),Object(i.a)(a,[{key:"onSearchChange",value:function(e){this.props.onSearchResultsCallback(e)}},{key:"render",value:function(){var e,a=this,t=this.props.handleBookUpdateCallback;return this.props.searchBooks&&(e=Object.entries(this.props.searchBooks).map(function(e,a){var n=Object(O.a)(e,2),l=(n[0],n[1]);return o.a.createElement("li",{key:a},o.a.createElement(j,{stateBookId:a,data:l,handleBookUpdateCallback:t.bind(this)}))})),o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement("button",{className:"close-search",onClick:this.props.handleCloseBookCallback},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{onChange:function(e){return a.onSearchChange(e.target.value)},type:"text",placeholder:"Search by title or author"}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},e)))}}]),a}(o.a.Component);function N(){var e=this;v().then(function(a){var t={};a.map(function(e){t[e.id]=e}),e.setState({data:t})})}var _=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={data:{}},t.handleOnResultsCallback=t.handleOnResultsCallback.bind(Object(u.a)(Object(u.a)(t))),t}return Object(b.a)(a,e),Object(i.a)(a,[{key:"handleAddBookCallback",value:function(e){e.push("/search")}},{key:"handleCloseBookCallback",value:function(e){e.push("/"),N.call(this)}},{key:"handleOnResultsCallback",value:function(e){var a=this;(function(e){return fetch("".concat(p,"/search"),{method:"POST",headers:Object(s.a)({},f,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})})(e).then(function(e){Object(s.a)({},a.state.data);var t={};e.map(function(e){Object.keys(a.state.data).includes(e.id)||(t[e.id]=e)}),a.setState({searchBooks:t})})}},{key:"handleAppStateCallbackOnBookUpdate",value:function(e,a){N.call(this)}},{key:"componentDidMount",value:function(){N.call(this)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},o.a.createElement(k.a,{path:"/",render:function(a){var t=a.history;return o.a.createElement(B,{handleAddBookCallback:e.handleAddBookCallback.bind(e,t),books:e.state.data,handleBookUpdateCallback:e.handleAppStateCallbackOnBookUpdate.bind(e)})}}),o.a.createElement(k.a,{path:"/search",render:function(a){var t=a.history;return o.a.createElement(g,{searchBooks:e.state.searchBooks,handleCloseBookCallback:e.handleCloseBookCallback.bind(e,t),onSearchResultsCallback:e.handleOnResultsCallback,handleBookUpdateCallback:e.handleAppStateCallbackOnBookUpdate.bind(e)})}}))}}]),a}(o.a.Component),U=(t(37),t(18)),R=t(25);c.a.render(o.a.createElement(U.a,null,o.a.createElement(_,null)),document.getElementById("root")),Object(R.a)()}},[[26,2,1]]]);
//# sourceMappingURL=main.818a2bb5.chunk.js.map