{"version":3,"sources":["BooksAPI.js","BookShelfChanger.js","Book.js","BookShelfComponent.js","ListBooksContent.js","ListBooks.js","SearchBooks.js","App.js","index.js"],"names":["api","token","localStorage","Math","random","toString","substr","headers","Accept","Authorization","getAll","fetch","concat","then","res","json","data","books","BookShelfChanger","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","selected","title","value","props","callback","_this2","options","map","element","idx","react_default","a","createElement","key","className","onChange","val","handleChange","target","disabled","React","Component","Book","valueCalled","book","shelf","id","method","objectSpread","Content-Type","body","JSON","stringify","handleBookUpdateCallback","stateBookId","style","width","height","backgroundImage","imageLinks","thumbnail","src_BookShelfChanger","bookId","handleCallback","bind","authors","BookShelfComponent","handleBookCallback","booksRender","src_Book","name","ListBooksContent","currentlyReadingBooks","filter","elt","wantToReadBooks","readBooks","notInShelfBooks","src_BookShelfComponent","ListBooks","src_ListBooksContent","onClick","handleAddBookCallback","SearchBooks","query","onSearchResultsCallback","handleCloseBookCallback","onSearchChange","type","placeholder","updateAllBooksState","BooksAPI","currentData","setState","BooksApp","showSearchPage","history","push","_this3","_this4","react_router","path","render","_ref","src_ListBooks","handleAppStateCallbackOnBookUpdate","_ref2","src_SearchBooks","handleOnResultsCallback","ReactDOM","react_router_dom","src_App","document","getElementById","register"],"mappings":"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","file":"static/js/main.0bca1c5b.chunk.js","sourcesContent":["\nconst api = \"https://reactnd-books-api.udacity.com\"\n\n\n// Generate a unique token for storing your bookshelf data on the backend server.\nlet token = localStorage.token\nif (!token)\n  token = localStorage.token = Math.random().toString(36).substr(-8)\n\nconst headers = {\n  'Accept': 'application/json',\n  'Authorization': token\n}\n\nexport const get = (bookId) =>\n  fetch(`${api}/books/${bookId}`, { headers })\n    .then(res => res.json())\n    .then(data => data.book)\n\nexport const getAll = () =>\n  fetch(`${api}/books`, { headers })\n    .then(res => res.json())\n    .then(data => data.books)\n\nexport const update = (book, shelf) =>\n  fetch(`${api}/books/${book.id}`, {\n    method: 'PUT',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ shelf })\n  }).then(res => res.json())\n\nexport const search = (query) =>\n  fetch(`${api}/search`, {\n    method: 'POST',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ query })\n  }).then(res => res.json())\n    .then(data => data.books)\n","import React from 'react'\nimport './App.css'\n\nclass BookShelfChanger extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            'selected': 'currentlyReading',\n            'data': [\n                {'title': 'Currently Reading', 'value': 'currentlyReading'},\n                {'title': 'Want to Read', 'value': 'wantToRead'},\n                {'title': 'Read', 'value': 'read'},\n                {'title': 'None', 'value': 'none'},\n            ]\n        }\n    }\n    handleChange(value){\n        this.props.callback(value);\n    }\n    render() {\n        const options = this.state.data.map(function(element, idx)  {\n            return <option key={idx} value={element.value}>{element.title} </option>\n            }\n        )\n        // I wanted to use defaltValue in option but it is strangely not working\n        return (\n        <div className=\"book-shelf-changer\">\n        <select\n            onChange={(val) => this.handleChange(val.target.value)}\n        >\n\n            <option value=\"move\" disabled selected>Move to...</option>\n            {options}\n        </select>\n        </div>\n        );\n    }\n}\n\nexport default BookShelfChanger","import React from 'react'\nimport './App.css'\nimport * as BooksAPI from './BooksAPI'\nimport BookShelfChanger from \"./BookShelfChanger\";\n\nclass Book extends React.Component {\n    handleCallback(valueCalled){\n        BooksAPI.update(this.props.data, valueCalled)\n            .then(this.props.handleBookUpdateCallback(this.props.stateBookId, this.props.data.id));\n    }\n    render() {\n        return (\n            <div className=\"book\">\n                <div className=\"book-top\">\n                    <div className=\"book-cover\" style={{\n                        width: 128,\n                        height: 193,\n                        backgroundImage: `url(${ this.props.data.imageLinks.thumbnail })`\n\n                    }}></div>\n                <BookShelfChanger bookId={this.props.data.id} callback={this.handleCallback.bind(this)}/>\n                </div>\n                <div className=\"book-title\">{this.props.data.title}</div>\n                {/* // TODO update authors to a list */}\n                <div className=\"book-authors\">{this.props.data.authors}</div>\n            </div>\n        );\n    }\n}\n\nexport default Book","import React from 'react'\nimport './App.css'\nimport Book from \"./Book\";\nclass BookShelfComponent extends React.Component {\n  render() {\n      // TODO is there any other way to make this callback without variable ?\n    let handleBookCallback = this.props.handleBookUpdateCallback\n    const booksRender = this.props.books.map(function(data, idx) {\n        return (\n            <li key={idx}>\n            <Book stateBookId={idx} data={data} handleBookUpdateCallback={handleBookCallback.bind(this)} />\n            </li>\n        )\n        ;\n    });\n\n    return (\n\n      <div className=\"bookshelf\">\n        <h2 className=\"bookshelf-title\">{this.props.name}</h2>\n        <div className=\"bookshelf-books\">\n          <ol className=\"books-grid\">\n            {booksRender}\n          </ol>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default BookShelfComponent","import React from 'react'\nimport './App.css'\nimport BookShelfComponent from \"./BookShelfComponent\";\n\nclass ListBooksContent extends React.Component {\n\n  render() {\n    let currentlyReadingBooks = this.props.books.filter(elt => elt.shelf===\"currentlyReading\");\n    let wantToReadBooks = this.props.books.filter(elt => elt.shelf===\"wantToRead\");\n    let readBooks = this.props.books.filter(elt => elt.shelf===\"read\");\n    let notInShelfBooks = this.props.books.filter(elt => (typeof(elt.shelf) === 'undefined'));\n    return (\n\n      <div className=\"list-books-content\">\n        <div>\n          <BookShelfComponent handleBookUpdateCallback={this.props.handleBookUpdateCallback.bind(this)} name={'Currently Reading'} books={currentlyReadingBooks} />\n          <BookShelfComponent handleBookUpdateCallback={this.props.handleBookUpdateCallback.bind(this)} name={'Want to Read'} books={wantToReadBooks} />\n          <BookShelfComponent handleBookUpdateCallback={this.props.handleBookUpdateCallback.bind(this)} name={'Read'} books={readBooks} />\n          <BookShelfComponent handleBookUpdateCallback={this.props.handleBookUpdateCallback.bind(this)} name={'NotInSelf'} books={notInShelfBooks} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ListBooksContent","import React from 'react'\nimport './App.css'\nimport ListBooksContent from \"./ListBooksContent\";\n\nclass ListBooks extends React.Component {\n  render() {\n    return (\n        <div className=\"list-books\">\n          <div className=\"list-books-title\">\n            <h1>MyReads</h1>\n          </div>\n          <ListBooksContent books={this.props.books} handleBookUpdateCallback={this.props.handleBookUpdateCallback.bind(this)} />\n          <div className=\"open-search\">\n            <button onClick={this.props.handleAddBookCallback}>Add a book</button>\n          </div>\n        </div>\n    );\n  }\n}\n\nexport default ListBooks","import React from 'react'\nimport './App.css'\n\nclass SearchBooks extends React.Component {\n    onSearchChange(query){\n        this.props.onSearchResultsCallback(query)\n    }\n  render() {\n    return (\n        <div className=\"search-books\">\n            <div className=\"search-books-bar\">\n              <button className=\"close-search\" onClick={this.props.handleCloseBookCallback}>Close</button>\n              <div className=\"search-books-input-wrapper\">\n                {/*\n                  NOTES: The search from BooksAPI is limited to a particular set of search terms.\n                  You can find these search terms here:\n                  https://github.com/udacity/reactnd-project-myreads-starter/blob/master/SEARCH_TERMS.md\n\n                  However, remember that the BooksAPI.search method DOES search by title or author. So, don't worry if\n                  you don't find a specific author or title. Every search is limited by search terms.\n                */}\n                <input onChange={(val) => this.onSearchChange(val.target.value)} type=\"text\" placeholder=\"Search by title or author\"/>\n\n              </div>\n            </div>\n            <div className=\"search-books-results\">\n              <ol className=\"books-grid\"></ol>\n            </div>\n        </div>\n    );\n  }\n}\n\nexport default SearchBooks","import React from 'react'\nimport {Route} from \"react-router-dom\";\nimport * as BooksAPI from './BooksAPI'\nimport './App.css'\nimport ListBooks from \"./ListBooks\";\nimport SearchBooks from \"./SearchBooks\";\n\nfunction updateAllBooksState() {\n    BooksAPI.getAll()\n    .then(currentData => {\n        this.setState({'data': currentData});\n    });\n}\n\nclass BooksApp extends React.Component {\n  constructor () {\n    super()\n    this.state = {\n        data: [],\n      showSearchPage: false,\n    }\n  }\n\n  handleAddBookCallback(history){\n      history.push('/search')\n  }\n  handleCloseBookCallback(history){\n      history.push('/')\n      updateAllBooksState.call(this);\n  }\n  handleOnResultsCallback(query){\n    BooksAPI.search(query)\n    .then(currentData => {\n        this.setState({'data': currentData})\n    });\n  }\n  handleAppStateCallbackOnBookUpdate(stateBookId, bookId){\n      updateAllBooksState.call(this);\n      /* This harder approach is not working properly yet\n      // TODO this is wrong and it fails multiple times :(\n      let copyFoo = [ ...this.state.data]; //create a new copy\n      BooksAPI.get(bookId).then(fetchData => {\n          copyFoo[stateBookId] = fetchData;\n          this.setState({data: copyFoo});\n      });\n\n       */\n  }\n  componentDidMount() {\n      updateAllBooksState.call(this);\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n          <Route path='/' render={({history}) => (\n               <ListBooks handleAddBookCallback={this.handleAddBookCallback.bind(this, history)} books={this.state.data} handleBookUpdateCallback={this.handleAppStateCallbackOnBookUpdate.bind(this)}/>\n          )}\n            />\n          <Route path=\"/search\" render={({history}) => (\n          <SearchBooks handleCloseBookCallback={this.handleCloseBookCallback.bind(this, history)} onSearchResultsCallback={this.handleOnResultsCallback.bind(this)} books={this.state.data}/>\n          )}\n                 />\n      </div>\n    );\n  }\n}\n\nexport default BooksApp\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\nimport {BrowserRouter} from 'react-router-dom'\nimport {register} from 'register-service-worker'\n\nReactDOM.render(\n    <BrowserRouter>\n        <App />\n    </BrowserRouter>\n    , document.getElementById('root')\n);\nregister();\n"],"sourceRoot":""}