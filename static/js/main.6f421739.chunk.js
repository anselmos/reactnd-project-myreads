(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,a,t){},28:function(e,a,t){e.exports=t(54)},36:function(e,a,t){},38:function(e,a,t){},40:function(e,a,t){},42:function(e,a,t){},52:function(e,a,t){},54:function(e,a,t){"use strict";t.r(a);var n=t(1),o=t.n(n),r=t(24),c=t.n(r),l=t(15),s=t(12),i=t.n(s),u=t(6),d=t(7),h=t(9),b=t(8),k=t(10),p=t(11),m=t(16),f=t(25),v=t(0),O="https://reactnd-books-api.udacity.com",C=localStorage.token;C||(C=localStorage.token=Math.random().toString(36).substr(-8));var j={Accept:"application/json",Authorization:C},y=function(){return fetch("".concat(O,"/books"),{headers:j}).then(function(e){return e.json()}).then(function(e){return e.books})},E=function(e){return fetch("".concat(O,"/search"),{method:"POST",headers:Object(l.a)({},j,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},B=(t(19),t(14)),g=(t(36),t(38),t(40),function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(b.a)(a).call(this,e))).state={data:[{title:"Currently Reading",value:"currentlyReading"},{title:"Want to Read",value:"wantToRead"},{title:"Read",value:"read"},{title:"None",value:"none"}]},t.handleChange=t.handleChange.bind(Object(p.a)(Object(p.a)(t))),t}return Object(k.a)(a,e),Object(d.a)(a,[{key:"handleChange",value:function(e){this.props.callback(e.target.value)}},{key:"render",value:function(){var e=this.state.data.map(function(e,a){return o.a.createElement("option",{key:a,value:e.value},e.title," ")});return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{defaultValue:"move",onChange:this.handleChange},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),e))}}]),a}(o.a.Component)),N=function(e){function a(){return Object(u.a)(this,a),Object(h.a)(this,Object(b.a)(a).apply(this,arguments))}return Object(k.a)(a,e),Object(d.a)(a,[{key:"handleCallback",value:function(){var e=Object(m.a)(i.a.mark(function e(a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t=this.props.data,n=a,fetch("".concat(O,"/books/").concat(t.id),{method:"PUT",headers:Object(l.a)({},j,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:n})}).then(function(e){return e.json()});case 2:this.props.handleBookUpdateCallback(this.props.data.id,a);case 3:case"end":return e.stop()}var t,n},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e="";void 0!==this.props.data.imageLinks&&(e=this.props.data.imageLinks.thumbnail);var a="";return void 0!==this.props.data.authors&&(a=this.props.data.authors.join(", ")),o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e,")")}}),o.a.createElement(g,{bookId:this.props.data.id,callback:this.handleCallback.bind(this)})),o.a.createElement("div",{className:"book-title"},this.props.data.title),o.a.createElement("div",{className:"book-authors"},a))}}]),a}(o.a.Component);var S=function(e){var a=this,t=e.handleBookUpdateCallback,n=Object.entries(e.books).map(function(e,n){var r=Object(B.a)(e,2),c=r[0],l=r[1];return o.a.createElement("li",{key:c},o.a.createElement(N,{stateBookId:c,data:l,handleBookUpdateCallback:t.bind(a)}))});return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},e.name),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},n)))},R=[{title:"Currently Reading",id:"currentlyReading"},{title:"Want To Read",id:"wantToRead"},{title:"Read",id:"read"}],w=function(e){function a(){return Object(u.a)(this,a),Object(h.a)(this,Object(b.a)(a).apply(this,arguments))}return Object(k.a)(a,e),Object(d.a)(a,[{key:"filter_books_dict_by_shelf",value:function(e,a){return Object.fromEntries(Object.entries(e).filter(function(e){var t=Object(B.a)(e,2);t[0];return t[1].shelf===a}))}},{key:"render",value:function(){var e=this,a=R.map(function(a,t){var n=a.title,r=a.id;return o.a.createElement(S,{handleBookUpdateCallback:e.props.handleBookUpdateCallback.bind(e),name:n,books:e.filter_books_dict_by_shelf(e.props.books,r),key:r})});return o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,a))}}]),a}(o.a.Component),U=function(e){var a=e.books,t=e.handleBookUpdateCallback,n=e.handleAddBookCallback;return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement(w,{books:a,handleBookUpdateCallback:t}),o.a.createElement("div",{className:"open-search"},o.a.createElement("button",{onClick:n},"Add a book")))},x=(t(42),function(e){function a(){return Object(u.a)(this,a),Object(h.a)(this,Object(b.a)(a).apply(this,arguments))}return Object(k.a)(a,e),Object(d.a)(a,[{key:"onSearchChange",value:function(e){this.props.onSearchResultsCallback(e)}},{key:"render",value:function(){var e,a=this,t=this.props.handleBookUpdateCallback;return this.props.searchBooks&&(e=Object.entries(this.props.searchBooks).map(function(e,a){var n=Object(B.a)(e,2),r=(n[0],n[1]);return o.a.createElement("li",{key:a},o.a.createElement(N,{stateBookId:a,data:r,handleBookUpdateCallback:t.bind(this)}))})),o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement("button",{className:"close-search",onClick:this.props.handleCloseBookCallback},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{onChange:function(e){return a.onSearchChange(e.target.value)},type:"text",placeholder:"Search by title or author"}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},e)))}}]),a}(o.a.Component));function A(){return _.apply(this,arguments)}function _(){return(_=Object(m.a)(i.a.mark(function e(){var a,t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:a=e.sent,t={},a.map(function(e){return t[e.id]=e}),this.setState({data:t});case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var T=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(b.a)(a).call(this,e))).state={data:{}},t.handleOnResultsCallback=t.handleOnResultsCallback.bind(Object(p.a)(Object(p.a)(t))),t}return Object(k.a)(a,e),Object(d.a)(a,[{key:"handleAddBookCallback",value:function(e){e.push("/search")}},{key:"handleCloseBookCallback",value:function(e){e.push("/"),A.call(this)}},{key:"handleOnResultsCallback",value:function(){var e=Object(m.a)(i.a.mark(function e(a){var t,n,o=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(a);case 2:t=e.sent,n={},!t||void 0!==typeof t.error&&t.error?this.setState({searchBooks:{}}):(t.filter(function(e){return!Object.keys(o.state.data).includes(e.id)}).map(function(e){return n[e.id]=e}),this.setState({searchBooks:n}));case 5:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"handleAppStateCallbackOnBookUpdate",value:function(e,a){var t=Object(l.a)({},this.state.data),n=Object(l.a)({},this.state.data[e]);n.shelf=a,t[e]=n,this.setState({data:t})}},{key:"componentDidMount",value:function(){A.call(this)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},o.a.createElement(f.a,{basename:"/reactnd-project-myreads"},o.a.createElement(v.c,null,o.a.createElement(v.a,{exact:!0,path:"/",render:function(a){var t=a.history;return o.a.createElement(U,{handleAddBookCallback:e.handleAddBookCallback.bind(e,t),books:e.state.data,handleBookUpdateCallback:e.handleAppStateCallbackOnBookUpdate.bind(e)})}}),o.a.createElement(v.a,{exact:!0,path:"/search",render:function(a){var t=a.history;return o.a.createElement(x,{searchBooks:e.state.searchBooks,handleCloseBookCallback:e.handleCloseBookCallback.bind(e,t),onSearchResultsCallback:e.handleOnResultsCallback,handleBookUpdateCallback:e.handleAppStateCallbackOnBookUpdate.bind(e)})}}))))}}]),a}(o.a.Component),I=(t(52),t(27));c.a.render(o.a.createElement(T,null),document.getElementById("root")),Object(I.a)()}},[[28,2,1]]]);
//# sourceMappingURL=main.6f421739.chunk.js.map